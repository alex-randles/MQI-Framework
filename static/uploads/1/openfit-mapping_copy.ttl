@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix openfit: <http://ontology.openfit.org#>.

#TriplesMap for the goals of exercises
<#Goal>
    
	a rr:TriplesMap ;
    rr:logicalTable [ rr:sqlQuery """SELECT Goal.id, Goal.description, Goal.type, Goal.type_id FROM Goal""" ] ;
    
	#a class were not specified,because already created in the subject of the subclasses.
	rr:subjectMap [
        rr:template "http://data.ontology.openfit.org#goal_{id}" ; 
   
    ];
    rr:predicateObjectMap [
        rr:predicate openfit:goal_id ;
        rr:objectMap [ rr:column "id" ] ;
    ];
	
    rr:predicateObjectMap [
        rr:predicate openfit:descriptions ;
        rr:objectMap [ rr:column "description" ] ;
    ];
    .




#Triple maps for the target area of a weight loss goal
<#TargetArea>
	a rr:TriplesMap ;

	rr:logicalTable [ rr:sqlQuery """SELECT  * FROM TargetArea""" ];	

	rr:subjectMap [
		rr:template "http://data.ontology.openfit.org#target_area_{id}" ;
		rr:class openfit:Target_Area;
	];	
	
	rr:predicateObjectMap [
		rr:predicate openfit:target_area_id ;
		rr:objectMap [ rr:column "id" ] ;
	] ;

	rr:predicateObjectMap [
		rr:predicate openfit:name ;
		rr:objectMap [ rr:column "name" ] ;
	] ;
	.
	
		
<#WeightLoss>
	a rr:TriplesMap ;
    rr:logicalTable [ rr:sqlQuery """SELECT Goal.id,Goal.description,Goal.type,Goal.type_id, WeightLossTargetAreas.targetArea_id FROM (WeightLoss JOIN WeightLossTargetAreas ON (WeightLoss.id = WeightLossTargetAreas.weightLoss_id))JOIN Goal ON (Goal.type_id = WeightLoss.id) WHERE Goal.type = 'weightLoss'""" ] ;
    rr:subjectMap [
        rr:template "http://data.ontology.openfit.org#goal_{id}" ; 
		rr:class openfit:WeightLoss ;
    ] ;
	
	rr:predicateObjectMap [
		rr:predicate openfit:weight_loss_id ;
		rr:objectMap [ rr:column "id" ] ;
	] ;
	
	#Object propreties mapping

		rr:predicateObjectMap [
			rr:predicate openfit:has_target_area;
			rr:objectMap [
            	rr:parentTriplesMap <#TargetArea> ;
            	rr:joinCondition [
                	rr:child "targetArea_id" ;
                	rr:parent "id" ;
            	] ;
        	] ;
		] ;
	.

#Triple maps for the target muscle of a muscle gain goal
<#TargetMuscle>
	a rr:TriplesMap ;

	rr:logicalTable [ rr:sqlQuery """SELECT  * FROM TargetMuscle"""];	

	rr:subjectMap [
		rr:template "http://data.ontology.openfit.org#target_muscle_{id}" ;
		rr:class openfit:Target_Muscle;
	];	
	
	rr:predicateObjectMap [
		rr:predicate openfit:target_muscle_id ;
		rr:objectMap [ rr:column "id" ] ;
	] ;

	rr:predicateObjectMap [
		rr:predicate openfit:name ;
		rr:objectMap [ rr:column "name" ] ;
	] ;
	.


<#MuscleGain>
	a rr:TriplesMap ;
    rr:logicalTable [ rr:sqlQuery """SELECT Goal.id,Goal.description,Goal.type,Goal.type_id, MuscleGainTargetMuscles.targetMuscle_id FROM (MuscleGain JOIN MuscleGainTargetMuscles ON (MuscleGain.id = MuscleGainTargetMuscles.muscleGain_id))JOIN Goal ON (Goal.type_id = MuscleGain.id) WHERE Goal.type = 'muscleGain'""" ] ;
    rr:subjectMap [
        rr:template "http://data.ontology.openfit.org#goal_{id}" ; 
		rr:class openfit:MuscleGain ;
    ] ;
	
	rr:predicateObjectMap [
		rr:predicate openfit:muscle_gain_id ;
		rr:objectMap [ rr:column "id" ] ;
	] ;
	
	#Object propreties mapping

		rr:predicateObjectMap [
			rr:predicate openfit:has_target_muscle;
			rr:objectMap [
            	rr:parentTriplesMap <#TargetMuscle> ;
            	rr:joinCondition [
                	rr:child "targetMuscle_id" ;
                	rr:parent "id" ;
            	] ;
        	] ;
		] ;
	
	.
